<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex justify-center pt-10">

<div class="w-[65%]  bg-white rounded-lg shadow overflow-hidden m-10">

    <!-- Header -->
    <div class="bg-gradient-to-r from-pink-400 to-red-400 p-5 text-white relative">
        <a href='logout' class="absolute top-4 right-4 text-xl hover:text-2xl">Logout</a>
        <h2 class="text-3xl">Hello <span class="hover:text-4xl">{{ request.user.username }}</span>,</h2>
        <p class="text-xl">You have {{ todos|length }} incomplete task{{ todos|length|pluralize }}</p>
    </div>

    <!-- Search + Add -->
    <div class="flex items-center justify-between px-6  py-3 border-b">
        <div class="flex items-center gap-2 ">
            <form method="GET" class="flex w-full gap-2">
                <input type="text" name="q" placeholder="ex" class="border rounded px-9 focus:outline-none focus:ring-1 focus:ring-red-400 py-2 w-full">
                <button class="border px-4 rounded text-red-400 border-red-400 hover:bg-red-400 hover:text-white transition">Search</button>
            </form>
         </div>
        <a href='add' class="text-5xl text-red-400  px-2">+</a>
     </div>
     <!-- Todo List -->
    <ul class="divide-y">
        {% for todo in todos %}
            <li class="flex items-center justify-between text-2xl p-4">
            <div class="flex items-center gap-3 cursor-pointer" onclick="toggleTodo(this)">
                <!-- Fake checkbox -->
                <span   class="w-4 h-4 rounded-full border-2 border-red-400 flex items-center justify-center"><span class="w-2 h-2 rounded-full bg-red-400 hidden"></span></span>
                <!-- Todo text -->
                <span class="todo-text"> {{ todo.title }}</span>
            </div>
            <div class="flex gap-3 items-center">
                <!-- EDIT -->
                <a href='/edit/{{ todo.id }}/'class="text-blue-500 text-xl font-semibold hover:text-2xl">Edit</a>
                <!-- DELETE -->
                <a href='/delete/{{ todo.id }}/' onclick="return confirm('DELETE TODO LIST : {{  todo.title }} ?')" class="text-red-500 text-xl font-bold hover:text-2xl">X</a>
            </div>
            </li>
        {% empty %}
        <li class="p-4 text-center text-gray-400">No tasks</li>
        {% endfor %}
    </ul>
</div>
<script>
function toggleTodo(el) {
    const text = el.querySelector('.todo-text');
    const dot = el.querySelector('span span');

    text.classList.toggle('line-through');
    text.classList.toggle('text-gray-400');

    dot.classList.toggle('hidden');
}
</script>

</body>
</html>
